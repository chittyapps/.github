# ChittyApps Bundle Export Configuration
# Defines Notion databases to export as CSV bundles for version-controlled data snapshots.
#
# Usage:
#   python scripts/export_bundles.py <bundle_key> [--dry-run]
#   python scripts/preflight.py --bundle <bundle_key>
#   python scripts/verify_bundle.py <bundle_key>
#
# Prerequisites:
#   - NOTION_TOKEN env var set (org secret)
#   - pip install notion-client pyyaml

defaults:
  output_root: packages
  manifest_filename: manifest.json
  format: csv

export_bundles:
  services:
    name: "ChittyApps Service Registry"
    schema_version: "1.0.0"
    description: "Service catalog, health status, and deployment metadata for all chittyapps repos"
    databases:
      - key: service_catalog
        notion_url: "TODO: paste Notion service catalog DB URL"
        description: "Master list of all chittyapps services with status, owner, tier"
      - key: health_checks
        notion_url: "TODO: paste Notion health checks DB URL"
        description: "Health endpoint registry and monitoring results"

  deployments:
    name: "ChittyApps Deployment Log"
    schema_version: "1.0.0"
    description: "Deployment history, versions, and rollback records"
    databases:
      - key: deployment_log
        notion_url: "TODO: paste Notion deployment log DB URL"
        description: "Historical deployment records per service"
      - key: environments
        notion_url: "TODO: paste Notion environments DB URL"
        description: "Environment configurations (dev, staging, production)"

  integrations:
    name: "ChittyApps Integration Map"
    schema_version: "1.0.0"
    description: "Service-to-service connections, API dependencies, and external integrations"
    databases:
      - key: integration_map
        notion_url: "TODO: paste Notion integration map DB URL"
        description: "Inter-service dependency graph"
      - key: api_registry
        notion_url: "TODO: paste Notion API registry DB URL"
        description: "API endpoints, versions, and deprecation status"
